import{h as j,r as d,j as e,G as i,i as S,a as h,d as p,T as r,b as m}from"./index-8vjFNNnn.js";const f=async a=>{try{const s=JSON.parse(sessionStorage.getItem("user")),o=(s==null?void 0:s.accessToken)||"",n=await fetch(`https://executivetracking.cloudjiffy.net/MahaasabhaMember/subscription/v1/getAllSubscriptionsByMember/{memberId}?memberId=${a}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}});if(!n.ok)throw new Error("Failed to fetch subscriptions");return await n.json()}catch(s){return console.error("Error fetching subscriptions:",s),[]}},v=async a=>{try{const s=JSON.parse(sessionStorage.getItem("user")),o=(s==null?void 0:s.accessToken)||"",n=await fetch(`https://executivetracking.cloudjiffy.net/MahaasabhaMember/subscription/v1/getAllPaymentsBySubscriptionId/{subscriptionId}?subscriptionId=${a}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}});if(!n.ok)throw new Error("Failed to fetch payment details");return await n.json()}catch(s){return console.error("Error fetching payment details:",s),[]}},k=()=>{j();const[a,s]=d.useState([]),[o,n]=d.useState([]),[x,l]=d.useState(!1),[T,u]=d.useState(null);d.useEffect(()=>{const t=JSON.parse(sessionStorage.getItem("user")),c=t==null?void 0:t.memberId;c?(u(c),(async()=>{const g=await f(c);s(g)})()):console.error("Member ID is missing")},[]);const y=async t=>{const c=await v(t);n(c),l(!0)},b=()=>{l(!1),n([])};return e.jsx(i,{container:!0,spacing:S,children:x?e.jsxs(e.Fragment,{children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(m,{variant:"contained",color:"secondary",onClick:b,children:"Back to Subscriptions"})}),o.length>0?o.map(t=>e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsx(h,{variant:"outlined",style:{height:"100%",padding:"16px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",borderRadius:"8px"},children:e.jsxs(p,{children:[e.jsxs(r,{variant:"h5",gutterBottom:!0,children:["Payment ID  : ",t.paymentid]}),e.jsxs(r,{variant:"body2",children:[e.jsx("strong",{children:"Amount : "})," ",t.amount]}),e.jsxs(r,{variant:"body2",style:{marginTop:"8px"},children:[e.jsx("strong",{children:"Date:"})," ",t.paymentDate]}),e.jsxs(r,{variant:"body2",style:{marginTop:"8px"},children:[e.jsx("strong",{children:"Method:"})," ",t.paymentMethod]}),e.jsxs(r,{variant:"body2",style:{marginTop:"8px"},children:[e.jsx("strong",{children:"Status:"})," ",t.status]})]})})},t.paymentid)):e.jsx(i,{item:!0,xs:12,children:e.jsx(r,{align:"center",variant:"body2",color:"textSecondary",children:"No payment details available"})})]}):a.length>0?a.map(t=>e.jsx(i,{item:!0,xs:12,sm:6,md:4,children:e.jsx(h,{variant:"outlined",style:{height:"100%",padding:"16px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",borderRadius:"8px"},children:e.jsxs(p,{children:[e.jsxs(r,{variant:"h6",gutterBottom:!0,children:["Subscription ID: ",t.id]}),e.jsxs(r,{variant:"body2",children:[e.jsx("strong",{children:"Start Date:"})," ",t.startDate]}),e.jsxs(r,{variant:"body2",style:{marginTop:"8px"},children:[e.jsx("strong",{children:"End Date:"})," ",t.endDate]}),e.jsxs(r,{variant:"body2",style:{marginTop:"8px"},children:[e.jsx("strong",{children:"Status:"})," ",t.status]}),e.jsx(m,{variant:"contained",color:"primary",size:"small",style:{marginTop:"16px"},onClick:()=>y(t.id),children:"Show Payment Details"})]})})},t.id)):e.jsx(i,{item:!0,xs:12,children:e.jsx(r,{align:"center",variant:"body2",color:"textSecondary",children:"No subscriptions available"})})})};export{k as default};
